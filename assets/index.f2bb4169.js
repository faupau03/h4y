import{r as c,o as T,a as E,b as d,c as u,d as h,e,w as j,u as b,f as oe,g as J,h as R,F as S,i as A,j as C,v as F,t as _,k as ae,l as le,m as ne,n as ce,p as N,q as ie,s as B,x as re,y as I,z as de,A as ue,B as ve,C as _e,D as he,E as me,G as pe,H as fe,I as ge}from"./vendor.36e9dae7.js";const xe=function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&m(n)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}};xe();const be={class:"w-screen h-screen"},ye={class:"z-10 bg-white fixed bottom-0 w-full border-t border-gray-200 flex"},we={class:"text-center"},$e={class:"block h-8 text-3xl leading-8"},ke=e("span",{class:"block text-xs leading-none"},"Ligen",-1),Ce={class:"text-center"},je={class:"block h-8 text-3xl leading-8"},Se=e("span",{class:"block text-xs leading-none"},"Favoriten",-1),De={class:"text-center"},Fe={class:"block h-8 text-3xl leading-8"},Ie=e("span",{class:"block text-xs leading-none"},"Suche",-1),Ae={setup(D){const v=c([]);return c({}),T(()=>{console.log("onMounted"),v.value=JSON.parse(localStorage.getItem("favorites")||"[]")}),(i,m)=>{const t=E("router-view"),s=E("router-link");return d(),u("div",be,[h(t),e("div",ye,[h(s,{to:"/leagues",class:"flex flex-grow items-center justify-center p-2 hover:text-indigo-500","active-class":"text-indigo-500"},{default:j(()=>[e("div",we,[e("span",$e,[h(b(oe),{class:"h-7 w-7 mx-auto"})]),ke])]),_:1}),h(s,{to:"/favorites","active-class":"text-indigo-500",class:"flex flex-grow items-center justify-center p-2 hover:text-indigo-500"},{default:j(()=>[e("div",Ce,[e("span",je,[h(b(J),{class:"h-7 w-7 mx-auto"})]),Se])]),_:1}),h(s,{to:"/search",class:"flex flex-grow items-center justify-center p-2 hover:text-indigo-500","active-class":"text-indigo-500"},{default:j(()=>[e("div",De,[e("span",Fe,[h(b(R),{class:"h-7 w-7 mx-auto"})]),Ie])]),_:1})])])}}};const Ne=e("div",{class:"ml-5 mt-3 mb-3 absolute"},[e("h1",{class:"text-3xl font-bold"},"Suche"),e("p",{class:"text-sm text-gray-500 uppercase font-bold"},"Verein / Halle")],-1),Le={class:"flex justify-center w-full pt-20"},Oe={class:"flex w-4/6"},Ke={class:"w-4/6 mx-auto"},Te=e("div",{class:"rounded-lg w-full mt-5 text-sm text-gray-500 uppercase font-bold"},"Verein",-1),Ve={id:"clubs"},Ge=["onClick"],Me={class:"text-sm text-gray-500"},ze=e("div",{class:"rounded-lg w-full mt-5 text-sm text-gray-500 uppercase font-bold"},"Halle",-1),Ee={id:"gyms"},He=["onClick"],Je={class:"text-sm text-gray-500"},Re={setup(D){const v=c(!1);c([]),c(""),c("Show more");const i=c([]),m=c([]);c("");const t=async s=>{v.value=!0;const n=await fetch("https://spo.handball4all.de/service/if_g_json.php?cmd=cs&cs="+s),l=await fetch("https://spo.handball4all.de/service/if_g_json.php?cmd=gs&gs="+s),p=await n.json(),y=await l.json();i.value=p[0].searchResult.list,m.value=y[0].searchResult.list,v.value=!1};return(s,n)=>(d(),u(S,null,[Ne,e("div",Le,[e("div",Oe,[h(b(R),{class:"ml-auto h-6 mt-2 text-neutral-800 mr-0 z-10"}),e("input",{type:"text",autocomplete:"off",class:"-ml-8 w-full pl-8 rounded-full",onInput:n[0]||(n[0]=l=>t(l.target.value))},null,32)])]),e("div",Ke,[Te,e("div",Ve,[(d(!0),u(S,null,A(i.value,l=>(d(),u("div",{class:"transform transition-all duration-300 scale-100 hover:scale-95 rounded-lg w-full border-neutral-300 border p-2 my-2",onClick:p=>s.$router.push("/club#"+l.no)},_(l.lname),9,Ge))),256)),C(e("div",Me," Keine Ergebnisse ",512),[[F,i.value.length<1]])]),ze,e("div",Ee,[(d(!0),u(S,null,A(m.value,l=>(d(),u("div",{class:"transform transition-all duration-300 scale-100 hover:scale-95 rounded-lg w-full border-neutral-300 border p-2 my-2",onClick:p=>s.$router.push("/gym#"+l.no)},_(l.lname),9,He))),256)),C(e("div",Je," Keine Ergebnisse ",512),[[F,m.value.length<1]])])])],64))}},H={},Be={class:"w-full h-full"},Pe=e("div",{class:"ml-5 pt-3 mb-3"},[e("h1",{class:"text-3xl font-bold"},"Verein"),e("p",{class:"text-sm text-gray-500 uppercase font-bold"}," Spiel\xFCbersicht ")],-1),Ue={id:"club-header",class:"flex w-5/6 m-auto border border-gray-100 shadow-xl rounded-lg relative"},We=["src"],qe={key:1},Qe={id:"club-info",class:"my-10 m-5 line-clamp-4 break-words"},Xe={class:"font-bold"},Ye={class:"text-gray-800"},Ze={class:"text-gray-800"},et=["href"],tt={class:"w-5/6 m-auto"},st={class:"mt-3 flex justify-between"},ot=e("h2",{class:"font-bold text-lg m-1"},"Spiele",-1),at={class:"text-sm m-2"},lt=N(" Alle Spiele "),nt={class:"overflow-auto max-h-[50%] w-full mx-auto bg-white rounded-2xl border border-gray-100 shadow-xl p-2 mb-20"},ct={class:"mr-4 ml-auto text-opacity-75"},it=e("hr",{class:"bg-gray-400 text-black h-[1.5px] mb-2 -mt-3"},null,-1),rt={key:0},dt={key:1},ut=e("div",{id:"league-info"},null,-1),vt={class:"rounded-lg bg-indigo-200 my-1 p-2 justify-between px-5 hover:scale-95 scale-100 transition-all"},_t={class:"grid grid-cols-3 sm:grid-cols-6 gap-1"},ht={id:"teams",class:"text-black w-fit col-span-2 text-xs font-bold"},mt={id:"date-time",class:"w-fit text-xs text-gray-800"},pt={class:"flex"},ft={class:"flex"},gt={id:"location",class:"flex text-black col-span-2"},xt={class:"truncate text-xs"},bt={id:"score",class:"flex w-fit"},yt={class:"min-w-[20px] mr-1 text-right"},wt=N(" : "),$t={class:"min-w-[20px] ml-1"},kt=["data-id","onClick"],P={props:["club_no"],emits:["updateFavorites","disclosure-update"],setup(D,{emit:v}){const i=D,m=ie(),t=c({}),s=c([]),n=c([]),l=c(!1),p=c([]),y=c(null),V=c(null),O=c(!1);t.value={};const K=c([]),W=o=>{K.value.filter(a=>a.getAttribute("data-id")!==o.toString()).forEach(a=>a.click())},q=(o,g)=>{if(!g)return;const a=K.value.find(k=>k.getAttribute("data-id")===V);console.log(a),o(a)},Q=async()=>{let o="";i.club_no?o=i.club_no:o=m.hash.substring(1);const a=await(await fetch("https://spo.handball4all.de/service/if_g_json.php?cmd=cs&cs="+o)).json();t.value=a[0].searchResult.list[0]},X=async()=>{const g=await(await fetch("/club_address.json")).json();t.value.webaddress=g[t.value.no]},G=async o=>{console.log(o),p.value=o,v("disclosure-update"),l.value=!0;const a=await(await fetch("https://spo.handball4all.de/service/if_g_json.php?ca=1&cmd=ps&cl="+o)).json();if(!a[0].content.score.length){p.value=s.value.find(r=>r.gClassID===o).matches,l.value=!1;return}const k=a[0].content.score.find(r=>r.tabTeamname.includes(t.value.lname));console.log(k.tabTeamID);const f=(await(await fetch("https://spo.handball4all.de/service/if_g_json.php?ca=0&cmd=ps&cl="+o+"&ct="+k.tabTeamID)).json())[0].content.futureGames.games;O.value?p.value=f:p.value=f.filter(r=>{const $=r.gDate.split(".");return new Date("20"+$[2],$[1]-1,$[0])>new Date}),l.value=!1},Y=async()=>{const g=await(await fetch("https://spo.handball4all.de/misc/mobApp.php?jsoncallback=teamData&format=json&cmd=data&lvTypeNext=club&lvIDNext="+t.value.id)).text();new Function("teamData",g)(function(k){const x=k[0].dataList;var w=[];for(const f in x){let r=w.length-1;if(!w[r]||w[r].gClassID!=x[f].gClassID){const $={gClassID:x[f].gClassID,gClassSname:x[f].gClassSname,matches:[]};let L=!1;$.gClassID||($.gClassID=x[f].class,L=!0),$.gClassSname||($.gClassSname=x[f].class_sname,L=!0),r=w.push($)-1,L||w[r].matches.push(x[f])}else w[r].matches.push(x[f])}s.value=w})},M=()=>{if(!n.value.length)return!1;for(const o of n.value)if(o.type=="club"&&o.id==t.value.id)return!0},Z=()=>{n.value.push({type:"club",id:t.value.id,name:t.value.lname,no:t.value.no}),z()},ee=()=>{for(const o of n.value)o.type=="club"&&o.id==t.value.id&&n.value.splice(n.value.indexOf(o),1);z()},z=()=>{localStorage.setItem("favorites",JSON.stringify(n.value)),v("updateFavorites")},te=async()=>{const o=localStorage.getItem("favorites");o?n.value=JSON.parse(o):n.value=[]},se=ae(i,"club_no");return le(se,async(o,g)=>{console.log("update club"),o&&forceUpdate()}),T(async()=>{await Q(),await Y(),await te(),await X()}),(o,g)=>(d(),u("div",Be,[Pe,e("div",Ue,[C(h(b(J),{class:"h-5 w-5 mt-1 ml-2 hover:text-indigo-500 absolute right-5 top-5",onClick:Z},null,512),[[F,!M()]]),C(h(b(ne),{class:"h-5 w-5 mt-1 ml-2 text-indigo-500 hover:text-black absolute right-5 top-5",onClick:ee},null,512),[[F,M()]]),t.value?(d(),u("img",{key:0,src:"/logos/clubs/"+t.value.no+".png",alt:"",class:"w-1/3 h-1/3 my-10 ml-5 rounded-lg border border-gray-500"},null,8,We)):(d(),u("div",qe,"Loading...")),e("div",Qe,[e("div",Xe,_(t.value.lname),1),e("div",Ye,"Postleitzahl: "+_(t.value.postal),1),e("div",Ze,"Nummer: "+_(t.value.no),1)]),e("a",{class:"absolute bottom-5 right-5 underline text-indigo-500 hover:text-indigo-800",href:"http://"+t.value.webaddress},_(t.value.webaddress),9,et)]),e("div",tt,[e("div",st,[ot,e("div",at,[lt,C(e("input",{class:"ml-1 mb-1 rounded",type:"checkbox",name:"",id:"","onUpdate:modelValue":g[0]||(g[0]=a=>O.value=a),onClick:g[1]||(g[1]=a=>y.value?G(y.value):null)},null,512),[[ce,O.value]])])]),e("div",nt,[(d(!0),u(S,null,A(s.value,(a,k)=>(d(),B(b(he),{key:a.gClassID},{default:j(({open:x,close:w})=>[h(b(de),{class:I(["flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-indigo-900 bg-indigo-100 rounded-t-lg hover:bg-indigo-200 focus:outline-none focus-visible:ring focus-visible:ring-indigo-500 focus-visible:ring-opacity-75",[a.matches.length?"":"!text-gray-600 !bg-gray-200",x?"":"my-1 rounded-lg"]]),onClick:f=>(y.value=a.gClassID,W(a.gClassID),G(a.gClassID)),disabled:!a.matches.length},{default:j(()=>[e("span",null,_(a.gClassSname),1),e("span",ct,_(a.matches.length?"":"spielfrei"),1),h(b(re),{class:I(["w-5 h-5 text-indigo-900",[x?"transform rotate-180":"",a.matches.length?"":"!text-gray-500"]])},null,8,["class"])]),_:2},1032,["class","onClick","disabled"]),h(b(_e),{class:"px-4 pt-4 pb-2 text-sm text-gray-500 bg-indigo-100 rounded-b-lg"},{default:j(({close:f})=>[it,l.value?(d(),u("div",rt,"Loading...")):(d(),u("div",dt,[ut,(d(!0),u(S,null,A(p.value,r=>(d(),u("div",vt,[e("div",_t,[e("div",ht,_(r.gHomeTeam)+" : "+_(r.gGuestTeam),1),e("div",mt,[e("div",pt,_(r.gWDay)+" "+_(r.gDate),1),e("div",ft,[h(b(ue),{class:"h-4 mr-1 text-indigo-900"}),N(" "+_(r.gTime),1)])]),e("div",gt,[h(b(ve),{class:"h-4 w-4 text-indigo-900 shrink-0"}),e("span",xt,_(r.gGymnasiumName),1)]),e("div",bt,[e("div",yt,_(r.gHomeGoals),1),wt,e("div",$t,_(r.gGuestGoals),1)])])]))),256))]))]),_:2},1024),C(e("button",{ref_for:!0,ref:f=>K.value[k]=f,"data-id":a.gClassID,onClick:f=>q(w,x)},null,8,kt),[[F,!1]])]),_:2},1024))),128))])])]))}},Ct={class:"w-full h-full"},jt={class:"mr-5 transition-all"},St=["onClick"],Dt={key:1,class:"w-[calc(100%-4rem)] h-full ml-auto mr-0 flex justify-center items-center px-5"},Ft=e("span",{class:"text-lg"},[N(" Noch keine Favoriten angelegt. "),e("br"),N(" Gehen Sie daf\xFCr zur Suche oder den Ligen. ")],-1),It=[Ft],At={setup(D){const v=c([]),i=c({}),m=c(!1),t=l=>{i.value=l,localStorage.setItem("selectedFavorite",JSON.stringify(l))},s=()=>{const l=localStorage.getItem("selectedFavorite");l?i.value=JSON.parse(l):i.value={};let p=!1;v.value.forEach(y=>{y==i.value&&(p=!0)}),p||(i.value=v.value[0])},n=async()=>{const l=localStorage.getItem("favorites");l?v.value=JSON.parse(l):v.value=[],s()};return T(async()=>{await n(),await s()}),(l,p)=>(d(),u("div",Ct,[e("div",{id:"menu",class:I(["h-full z-10 pl-5 w-[calc(50%+4rem)] bg-indigo-200 transition-all duration-300 fixed",m.value?"left-0":"-left-1/2"])},[h(b(me),{class:"h-8 w-8 m-5 ml-auto mr-5",onClick:p[0]||(p[0]=y=>m.value=!m.value)}),e("div",jt,[e("p",{class:I(["font-bold",m.value?"":"ml-[calc(100%-2.5rem)] -mr-2"])},"Verein",2),(d(!0),u(S,null,A(v.value,y=>(d(),u("div",{class:I(["rounded-lg shadow-2xl hover:scale-95 scale-100 transition all bg-indigo-600 h-9 break-all text-indigo-100 p-2 my-1 overflow-hidden",m.value?"":"ml-[calc(100%-3.2rem)] -mr-2"]),onClick:V=>t(y)},_(y.name),11,St))),256))])],2),i.value&&i.value.type=="club"?(d(),B(P,{class:"w-[calc(100%-4rem)] ml-auto mr-0",club_no:i.value.no,key:i.value.no,onUpdateFavorites:n},null,8,["club_no"])):(d(),u("div",Dt,It))]))}},Nt={},Lt={},Ot={},Kt=[{path:"/",component:H,meta:{KeepAlive:!0}},{path:"/leagues",component:H,meta:{KeepAlive:!0}},{path:"/favorites",component:At,meta:{KeepAlive:!0}},{path:"/search",component:Re,meta:{KeepAlive:!0}},{path:"/match",component:Lt,meta:{KeepAlive:!0}},{path:"/club",component:P,meta:{KeepAlive:!0}},{path:"/gym",component:Ot,meta:{KeepAlive:!0}},{path:"/settings",component:Nt,meta:{KeepAlive:!0}}],Tt=pe({history:fe(),routes:Kt}),U=ge(Ae);U.use(Tt);U.mount("#app");
