import{v as oe,r,o as R,a as M,b as u,c as _,d as m,e,w as S,u as b,f as ae,g as H,h as J,F as D,i as A,j,k as F,t as f,l as le,m as ne,n as ie,p as ce,q as N,s as re,x as W,y as de,z as I,A as ue,B as ve,C as he,D as _e,E as fe,G as me,H as pe,I as ge,J as xe}from"./vendor.4199a006.js";const be=function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))h(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&h(n)}).observe(document,{childList:!0,subtree:!0});function c(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function h(t){if(t.ep)return;t.ep=!0;const s=c(t);fetch(t.href,s)}};be();function ye(C={}){const{immediate:v=!1,onNeedRefresh:c,onOfflineReady:h,onRegistered:t,onRegisterError:s}=C;let n;const a=async(i=!0)=>{};return"serviceWorker"in navigator&&(n=new oe("/h4y/sw.js",{scope:"/h4y/",type:"classic"}),n.addEventListener("activated",i=>{i.isUpdate?window.location.reload():h==null||h()}),n.register({immediate:v}).then(i=>{t==null||t(i)}).catch(i=>{s==null||s(i)})),a}const we={class:"w-screen h-screen"},$e={class:"z-10 bg-white fixed bottom-0 w-full border-t border-gray-200 flex"},ke={class:"text-center"},Ce={class:"block h-8 text-3xl leading-8"},je=e("span",{class:"block text-xs leading-none"},"Ligen",-1),Se={class:"text-center"},De={class:"block h-8 text-3xl leading-8"},Fe=e("span",{class:"block text-xs leading-none"},"Favoriten",-1),Ie={class:"text-center"},Ae={class:"block h-8 text-3xl leading-8"},Ne=e("span",{class:"block text-xs leading-none"},"Suche",-1),Le={setup(C){"serviceWorker"in navigator&&ye();const v=r([]);return r({}),R(()=>{console.log("onMounted"),v.value=JSON.parse(localStorage.getItem("favorites")||"[]")}),(c,h)=>{const t=M("router-view"),s=M("router-link");return u(),_("div",we,[m(t),e("div",$e,[m(s,{to:"/leagues",class:"flex flex-grow items-center justify-center p-2 hover:text-indigo-500","active-class":"text-indigo-500"},{default:S(()=>[e("div",ke,[e("span",Ce,[m(b(ae),{class:"h-7 w-7 mx-auto"})]),je])]),_:1}),m(s,{to:"/favorites","active-class":"text-indigo-500",class:"flex flex-grow items-center justify-center p-2 hover:text-indigo-500"},{default:S(()=>[e("div",Se,[e("span",De,[m(b(H),{class:"h-7 w-7 mx-auto"})]),Fe])]),_:1}),m(s,{to:"/search",class:"flex flex-grow items-center justify-center p-2 hover:text-indigo-500","active-class":"text-indigo-500"},{default:S(()=>[e("div",Ie,[e("span",Ae,[m(b(J),{class:"h-7 w-7 mx-auto"})]),Ne])]),_:1})])])}}};const Oe=e("div",{class:"ml-5 mt-3 mb-3 absolute"},[e("h1",{class:"text-3xl font-bold"},"Suche"),e("p",{class:"text-sm text-gray-500 uppercase font-bold"},"Verein / Halle")],-1),Ke={class:"flex justify-center w-full pt-20"},Re={class:"flex w-4/6"},Ee={class:"w-4/6 mx-auto"},Te=e("div",{class:"rounded-lg w-full mt-5 text-sm text-gray-500 uppercase font-bold"},"Verein",-1),Ve={id:"clubs"},Ge=["onClick"],Me={class:"text-sm text-gray-500"},ze=e("div",{class:"rounded-lg w-full mt-5 text-sm text-gray-500 uppercase font-bold"},"Halle",-1),He={id:"gyms"},Je=["onClick"],We={class:"text-sm text-gray-500"},Be={setup(C){const v=r(!1);r([]),r(""),r("Show more");const c=r([]),h=r([]);r("");const t=async s=>{v.value=!0;const n=await fetch("https://spo.handball4all.de/service/if_g_json.php?cmd=cs&cs="+s),a=await fetch("https://spo.handball4all.de/service/if_g_json.php?cmd=gs&gs="+s),i=await n.json(),y=await a.json();c.value=i[0].searchResult.list,h.value=y[0].searchResult.list,v.value=!1};return(s,n)=>(u(),_(D,null,[Oe,e("div",Ke,[e("div",Re,[m(b(J),{class:"ml-auto h-6 mt-2 text-neutral-800 mr-0 z-10"}),e("input",{type:"text",autocomplete:"off",class:"-ml-8 w-full pl-8 rounded-full",onInput:n[0]||(n[0]=a=>t(a.target.value))},null,32)])]),e("div",Ee,[Te,e("div",Ve,[(u(!0),_(D,null,A(c.value,a=>(u(),_("div",{class:"transform transition-all duration-300 scale-100 hover:scale-95 rounded-lg w-full border-neutral-300 border p-2 my-2",onClick:i=>s.$router.push("/club#"+a.no)},f(a.lname),9,Ge))),256)),j(e("div",Me," Keine Ergebnisse ",512),[[F,c.value.length<1]])]),ze,e("div",He,[(u(!0),_(D,null,A(h.value,a=>(u(),_("div",{class:"transform transition-all duration-300 scale-100 hover:scale-95 rounded-lg w-full border-neutral-300 border p-2 my-2",onClick:i=>s.$router.push("/gym#"+a.no)},f(a.lname),9,Je))),256)),j(e("div",We," Keine Ergebnisse ",512),[[F,h.value.length<1]])])])],64))}},z={},Pe={class:"w-full h-full"},Ue=e("div",{class:"ml-5 pt-3 mb-3"},[e("h1",{class:"text-3xl font-bold"},"Verein"),e("p",{class:"text-sm text-gray-500 uppercase font-bold"}," Spiel\xFCbersicht ")],-1),qe={id:"club-header",class:"flex w-5/6 m-auto border border-gray-100 shadow-xl rounded-lg relative"},Qe=["src"],Xe={key:1},Ye={id:"club-info",class:"my-10 m-5 line-clamp-4 break-words"},Ze={class:"font-bold"},et={class:"text-gray-800"},tt={class:"text-gray-800"},st=["href"],ot={class:"w-5/6 m-auto"},at={class:"mt-3 flex justify-between"},lt=e("h2",{class:"font-bold text-lg m-1"},"Spiele",-1),nt={class:"text-sm m-2"},it=N(" Alle Spiele "),ct={class:"overflow-auto max-h-[50%] w-full mx-auto bg-white rounded-2xl border border-gray-100 shadow-xl p-2 mb-20"},rt={class:"mr-4 ml-auto text-opacity-75"},dt=e("hr",{class:"bg-gray-400 text-black h-[1.5px] mb-2 -mt-3"},null,-1),ut={key:0},vt={key:1},ht=e("div",{id:"league-info"},null,-1),_t={class:"rounded-lg bg-indigo-200 my-1 p-2 justify-between px-5 hover:scale-95 scale-100 transition-all"},ft={class:"grid grid-cols-3 sm:grid-cols-6 gap-1"},mt={id:"teams",class:"text-black w-fit col-span-2 text-xs font-bold"},pt={id:"date-time",class:"w-fit text-xs text-gray-800"},gt={class:"flex"},xt={class:"flex"},bt={id:"location",class:"flex text-black col-span-2"},yt={class:"truncate text-xs"},wt={id:"score",class:"flex w-fit"},$t={class:"min-w-[20px] mr-1 text-right"},kt=N(" : "),Ct={class:"min-w-[20px] ml-1"},jt=["data-id","onClick"],B={props:["club_no"],emits:["updateFavorites","disclosure-update"],setup(C,{emit:v}){const c=C,h=re(),t=r({}),s=r([]),n=r([]),a=r(!1),i=r([]),y=r(null),E=r(null),O=r(!1);t.value={};const K=r([]),U=o=>{K.value.filter(l=>l.getAttribute("data-id")!==o.toString()).forEach(l=>l.click())},q=(o,g)=>{if(!g)return;const l=K.value.find(k=>k.getAttribute("data-id")===E);console.log(l),o(l)},Q=async()=>{let o="";c.club_no?o=c.club_no:o=h.hash.substring(1);const l=await(await fetch("https://spo.handball4all.de/service/if_g_json.php?cmd=cs&cs="+o)).json();t.value=l[0].searchResult.list[0]},X=async()=>{const g=await(await fetch("/club_address.json")).json();t.value.webaddress=g[t.value.no]},T=async o=>{console.log(o),i.value=o,v("disclosure-update"),a.value=!0;const l=await(await fetch("https://spo.handball4all.de/service/if_g_json.php?ca=1&cmd=ps&cl="+o)).json();if(!l[0].content.score.length){i.value=s.value.find(d=>d.gClassID===o).matches,a.value=!1;return}const k=l[0].content.score.find(d=>d.tabTeamname.includes(t.value.lname));console.log(k.tabTeamID);const p=(await(await fetch("https://spo.handball4all.de/service/if_g_json.php?ca=0&cmd=ps&cl="+o+"&ct="+k.tabTeamID)).json())[0].content.futureGames.games;O.value?i.value=p:i.value=p.filter(d=>{const $=d.gDate.split(".");return new Date("20"+$[2],$[1]-1,$[0])>new Date}),a.value=!1},Y=async()=>{const g=await(await fetch("https://spo.handball4all.de/misc/mobApp.php?jsoncallback=teamData&format=json&cmd=data&lvTypeNext=club&lvIDNext="+t.value.id)).text();new Function("teamData",g)(function(k){const x=k[0].dataList;var w=[];for(const p in x){let d=w.length-1;if(!w[d]||w[d].gClassID!=x[p].gClassID){const $={gClassID:x[p].gClassID,gClassSname:x[p].gClassSname,matches:[]};let L=!1;$.gClassID||($.gClassID=x[p].class,L=!0),$.gClassSname||($.gClassSname=x[p].class_sname,L=!0),d=w.push($)-1,L||w[d].matches.push(x[p])}else w[d].matches.push(x[p])}s.value=w})},V=()=>{if(!n.value.length)return!1;for(const o of n.value)if(o.type=="club"&&o.id==t.value.id)return!0},Z=()=>{n.value.push({type:"club",id:t.value.id,name:t.value.lname,no:t.value.no}),G()},ee=()=>{for(const o of n.value)o.type=="club"&&o.id==t.value.id&&n.value.splice(n.value.indexOf(o),1);G()},G=()=>{localStorage.setItem("favorites",JSON.stringify(n.value)),v("updateFavorites")},te=async()=>{const o=localStorage.getItem("favorites");o?n.value=JSON.parse(o):n.value=[]},se=le(c,"club_no");return ne(se,async(o,g)=>{console.log("update club"),o&&forceUpdate()}),R(async()=>{await Q(),await Y(),await te(),await X()}),(o,g)=>(u(),_("div",Pe,[Ue,e("div",qe,[j(m(b(H),{class:"h-5 w-5 mt-1 ml-2 hover:text-indigo-500 absolute right-5 top-5",onClick:Z},null,512),[[F,!V()]]),j(m(b(ie),{class:"h-5 w-5 mt-1 ml-2 text-indigo-500 hover:text-black absolute right-5 top-5",onClick:ee},null,512),[[F,V()]]),t.value?(u(),_("img",{key:0,src:"/logos/clubs/"+t.value.no+".png",alt:"",class:"w-1/3 h-1/3 my-10 ml-5 rounded-lg border border-gray-500"},null,8,Qe)):(u(),_("div",Xe,"Loading...")),e("div",Ye,[e("div",Ze,f(t.value.lname),1),e("div",et,"Postleitzahl: "+f(t.value.postal),1),e("div",tt,"Nummer: "+f(t.value.no),1)]),e("a",{class:"absolute bottom-5 right-5 underline text-indigo-500 hover:text-indigo-800",href:"http://"+t.value.webaddress},f(t.value.webaddress),9,st)]),e("div",ot,[e("div",at,[lt,e("div",nt,[it,j(e("input",{class:"ml-1 mb-1 rounded",type:"checkbox",name:"",id:"","onUpdate:modelValue":g[0]||(g[0]=l=>O.value=l),onClick:g[1]||(g[1]=l=>y.value?T(y.value):null)},null,512),[[ce,O.value]])])]),e("div",ct,[(u(!0),_(D,null,A(s.value,(l,k)=>(u(),W(b(fe),{key:l.gClassID},{default:S(({open:x,close:w})=>[m(b(ue),{class:I(["flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-indigo-900 bg-indigo-100 rounded-t-lg hover:bg-indigo-200 focus:outline-none focus-visible:ring focus-visible:ring-indigo-500 focus-visible:ring-opacity-75",[l.matches.length?"":"!text-gray-600 !bg-gray-200",x?"":"my-1 rounded-lg"]]),onClick:p=>(y.value=l.gClassID,U(l.gClassID),T(l.gClassID)),disabled:!l.matches.length},{default:S(()=>[e("span",null,f(l.gClassSname),1),e("span",rt,f(l.matches.length?"":"spielfrei"),1),m(b(de),{class:I(["w-5 h-5 text-indigo-900",[x?"transform rotate-180":"",l.matches.length?"":"!text-gray-500"]])},null,8,["class"])]),_:2},1032,["class","onClick","disabled"]),m(b(_e),{class:"px-4 pt-4 pb-2 text-sm text-gray-500 bg-indigo-100 rounded-b-lg"},{default:S(({close:p})=>[dt,a.value?(u(),_("div",ut,"Loading...")):(u(),_("div",vt,[ht,(u(!0),_(D,null,A(i.value,d=>(u(),_("div",_t,[e("div",ft,[e("div",mt,f(d.gHomeTeam)+" : "+f(d.gGuestTeam),1),e("div",pt,[e("div",gt,f(d.gWDay)+" "+f(d.gDate),1),e("div",xt,[m(b(ve),{class:"h-4 mr-1 text-indigo-900"}),N(" "+f(d.gTime),1)])]),e("div",bt,[m(b(he),{class:"h-4 w-4 text-indigo-900 shrink-0"}),e("span",yt,f(d.gGymnasiumName),1)]),e("div",wt,[e("div",$t,f(d.gHomeGoals),1),kt,e("div",Ct,f(d.gGuestGoals),1)])])]))),256))]))]),_:2},1024),j(e("button",{ref_for:!0,ref:p=>K.value[k]=p,"data-id":l.gClassID,onClick:p=>q(w,x)},null,8,jt),[[F,!1]])]),_:2},1024))),128))])])]))}},St={class:"w-full h-full"},Dt={class:"mr-5 transition-all"},Ft=["onClick"],It={key:1,class:"w-[calc(100%-4rem)] h-full ml-auto mr-0 flex justify-center items-center px-5"},At=e("span",{class:"text-lg"},[N(" Noch keine Favoriten angelegt. "),e("br"),N(" Gehen Sie daf\xFCr zur Suche oder den Ligen. ")],-1),Nt=[At],Lt={setup(C){const v=r([]),c=r({}),h=r(!1),t=a=>{c.value=a,localStorage.setItem("selectedFavorite",JSON.stringify(a))},s=()=>{const a=localStorage.getItem("selectedFavorite");a?c.value=JSON.parse(a):c.value={};let i=!1;v.value.forEach(y=>{y==c.value&&(i=!0)}),i||(c.value=v.value[0])},n=async()=>{const a=localStorage.getItem("favorites");a?v.value=JSON.parse(a):v.value=[],s()};return R(async()=>{await n(),await s()}),(a,i)=>(u(),_("div",St,[e("div",{id:"menu",class:I(["h-full z-10 pl-5 w-[calc(50%+4rem)] bg-indigo-200 transition-all duration-300 fixed",h.value?"left-0":"-left-1/2"])},[m(b(me),{class:"h-8 w-8 m-5 ml-auto mr-5",onClick:i[0]||(i[0]=y=>h.value=!h.value)}),e("div",Dt,[e("p",{class:I(["font-bold",h.value?"":"ml-[calc(100%-2.5rem)] -mr-2"])},"Verein",2),(u(!0),_(D,null,A(v.value,y=>(u(),_("div",{class:I(["rounded-lg shadow-2xl hover:scale-95 scale-100 transition all bg-indigo-600 h-9 break-all text-indigo-100 p-2 my-1 overflow-hidden",h.value?"":"ml-[calc(100%-3.2rem)] -mr-2"]),onClick:E=>t(y)},f(y.name),11,Ft))),256))])],2),c.value&&c.value.type=="club"?(u(),W(B,{class:"w-[calc(100%-4rem)] ml-auto mr-0",club_no:c.value.no,key:c.value.no,onUpdateFavorites:n},null,8,["club_no"])):(u(),_("div",It,Nt))]))}},Ot={},Kt={},Rt={},Et=[{path:"/",component:z,meta:{KeepAlive:!0}},{path:"/leagues",component:z,meta:{KeepAlive:!0}},{path:"/favorites",component:Lt,meta:{KeepAlive:!0}},{path:"/search",component:Be,meta:{KeepAlive:!0}},{path:"/match",component:Kt,meta:{KeepAlive:!0}},{path:"/club",component:B,meta:{KeepAlive:!0}},{path:"/gym",component:Rt,meta:{KeepAlive:!0}},{path:"/settings",component:Ot,meta:{KeepAlive:!0}}],Tt=pe({history:ge(),routes:Et}),P=xe(Le);P.use(Tt);P.mount("#app");
